<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Inquiry Framework</title>
    <link rel="stylesheet" href="css/grid.css">
    <link rel="stylesheet" href="css/tile.css">
    <link rel="stylesheet" href="css/expander.css">
    <link rel="stylesheet" href="css/tile-modern.css">
    
    <!-- Add React dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
</head>
<body>
    <!-- Your existing HTML structure stays the same until the expander section -->
    <div class="dif-container">
        <!-- ... (previous content) ... -->

        <!-- Replace expander div with -->
        <div id="expander-root"></div>
    </div>

    <!-- Initialize React expander -->
    <script type="module">
        const container = document.getElementById('expander-root');
        const root = ReactDOM.createRoot(container);

        // Click handler for tiles
        document.querySelector('.dif-grid').addEventListener('click', (e) => {
            const tile = e.target.closest('.dif-tile');
            if (!tile) return;

            console.log('Tile clicked'); // Debug logging

            // Get preview word data
            const getPreviewWord = (className) => 
                tile.querySelector(`.preview-word.${className}`)?.textContent || '';

            const content = {
                type: tile.dataset.recordType || 'Book',
                subject: getPreviewWord('subject'),
                class: getPreviewWord('class'),
                description: "This comprehensive and authoritative history of the War of 1812...",
                breadcrumbs: [getPreviewWord('breadcrumb')],
                colorWords: [getPreviewWord('colorword')],
                links: [
                    { text: "Related Documents", url: "#", type: "reference" },
                    { text: "Purchase Book", url: "#", type: "purchase" }
                ],
                image: tile.querySelector('img')?.src || "/api/placeholder/400/320"
            };

            console.log('Content prepared:', content); // Debug logging
            
            import('./ExpanderComponent.jsx').then(module => {
                const Expander = module.default;
                root.render(
                    React.createElement(Expander, {
                        isOpen: true,
                        content: content,
                        onClose: () => root.render(null)
                    })
                );
            }).catch(err => console.error('Error loading Expander:', err));
        });
    </script>
</body>
</html>