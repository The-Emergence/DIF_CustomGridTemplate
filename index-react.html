<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Inquiry Framework - React Test</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/grid.css">
    <link rel="stylesheet" href="css/tile.css">
    <link rel="stylesheet" href="css/expander.css">
    <link rel="stylesheet" href="css/tile-modern.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    
    <!-- React Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div class="dif-container">
        <header class="dif-header">
            <h1 class="dif-modern-title">War of 1812 - React Test</h1>
        </header>
        
        <!-- Main Grid Container -->
        <div class="dif-grid">
            <!-- Your existing tiles -->
        </div>

        <!-- React Mount Point -->
        <div id="expander-root" class="dif-expander"></div>
    </div>

    <!-- React Component -->
    <script type="text/babel">
        // Function to get content from tile (same as your original)
        function getRecordContent(tile) {
            const getPreviewWord = (className) => 
                tile.querySelector(`.preview-word.${className}`)?.textContent || '';

            return {
                type: tile.dataset.recordType,
                subject: getPreviewWord('subject'),
                class: getPreviewWord('class'),
                description: "This comprehensive and authoritative history of the War of 1812, thoroughly revised for the 200th anniversary of the historic conflict, is a myth-shattering study that will inform and entertain students, historians, and general readers alike. Donald R. Hickey explores the military, diplomatic, and domestic history of our second war with Great Britain, bringing the study up to date with recent scholarship on all aspects of the war, from the Gulf of Mexico to Canada.",
                breadcrumbs: [getPreviewWord('breadcrumb')],
                colorWords: [getPreviewWord('colorword')],
                links: [
                    { text: "Related Documents", url: "#", type: "reference" },
                    { text: "Purchase Book", url: "#", type: "purchase" }
                ],
                image: tile.querySelector('img')?.src || "/api/placeholder/400/320"
            };
        }

        // Expander Component
        const Expander = ({ content, onClose }) => {
            if (!content) return null;

            return (
                <div className="expander-content w-full">
                    <div className="p-4">
                        <div className="flex justify-between items-center gap-2 mb-4">
                            <div className="px-2 py-0.5 text-xs border rounded border-blue-500 text-gray-700">
                                {content.type}
                            </div>
                            <div className="flex items-center gap-2">
                                <button className="w-6 h-6 flex items-center justify-center bg-gray-800/10 rounded-full">
                                    <svg className="w-3.5 h-3.5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                        <path d="M19 21l-7-4-7 4V5a2 2 0 012-2h10a2 2 0 012 2v16z"/>
                                    </svg>
                                </button>
                                <button className="w-6 h-6 flex items-center justify-center bg-gray-800/10 rounded-full">
                                    <svg className="w-3.5 h-3.5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                        <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/>
                                        <path d="M16 6l-4-4-4 4"/>
                                        <path d="M12 2v13"/>
                                    </svg>
                                </button>
                                <span onClick={onClose} className="expander-close w-6 h-6 flex items-center justify-center bg-gray-800/10 rounded-full text-gray-700 cursor-pointer text-lg">
                                    Ã—
                                </span>
                            </div>
                        </div>

                        <div className="float-left w-64 mr-4 mb-2">
                            <img 
                                src={content.image} 
                                alt={content.subject}
                                className="w-full h-48 object-cover border border-gray-200 rounded-lg shadow-sm"
                            />
                        </div>

                        <div className="overflow-hidden">
                            <h2 className="text-lg font-medium text-gray-800 mb-3">{content.subject}</h2>
                            <p className="text-sm text-gray-600 mb-3">{content.description}</p>
                            <div className="flex flex-wrap gap-2">
                                {content.links.map((link, index) => (
                                    <a 
                                        key={index}
                                        href={link.url}
                                        className={`px-2 py-1 text-xs border transition-colors duration-200 no-underline 
                                            ${link.type === 'purchase' 
                                                ? 'border-green-600 text-green-600 hover:bg-green-600 hover:text-white'
                                                : 'border-gray-800 text-gray-800 hover:bg-gray-800 hover:text-white'}`}
                                    >
                                        {link.text}
                                    </a>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Initialize and handle clicks
        const root = ReactDOM.createRoot(document.getElementById('expander-root'));
        
        document.querySelector('.dif-grid').addEventListener('click', (e) => {
            const tile = e.target.closest('.dif-tile');
            if (tile) {
                const content = getRecordContent(tile);
                root.render(
                    <Expander 
                        content={content}
                        onClose={() => root.render(null)}
                    />
                );
            }
        });
    </script>
</body>
</html>